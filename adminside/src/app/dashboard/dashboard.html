<div class="admin-dashboard">
  <!-- Sidebar -->
  <aside class="sidebar">
    <!-- Logo RePartir -->
    <div class="logo-section">
      <img src="assets/logo.png" alt="RePartir Logo" class="logo">
    </div>

    <!-- Navigation -->
    <nav class="nav-menu">
      <ul class="nav-list">
        <li class="nav-item active">
          <a href="/dashboard" class="nav-link">
            <i class="fas fa-home"></i>
            <span>Tableau de bord</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/centres-formation" class="nav-link">
            <i class="fas fa-users-cog"></i>
            <span>Gestion utilisateurs</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/liste-admin" class="nav-link">
            <i class="fas fa-users"></i>
            <span>Administrateurs</span>
          </a>
        </li>
            <li class="nav-item">
              <a href="/statistiques" class="nav-link">
                <i class="fas fa-chart-bar"></i>
                <span>Statistiques</span>
              </a>
            </li>
      </ul>
    </nav>

        <!-- D√©connexion -->
        <div class="logout-section">
          <a href="#" class="logout-link" (click)="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>D√©connexion</span>
          </a>
        </div>
  </aside>

  <!-- Contenu principal -->
  <main class="main-content">
    <!-- En-t√™te -->
    <header class="header">
      <div class="header-left">
        <!-- Bouton toggle pour mobile si n√©cessaire -->
      </div>
      <div class="header-right">
        <div class="notifications" (click)="openNotificationsModal()">
          <i class="fas fa-bell"></i>
          <span class="notification-badge" *ngIf="getUnreadNotificationsCount() > 0">{{ getUnreadNotificationsCount() }}</span>
        </div>
        <div class="user-info">
          <span class="user-name">{{ currentUserName }}</span>
        </div>
            <div class="user-avatar">
              <img src="assets/pp.png" alt="Profile">
            </div>
      </div>
    </header>

    <!-- Contenu du dashboard -->
    <div class="dashboard-content">
          <!-- Message de bienvenue et Actions rapides -->
          <div class="welcome-actions-container">
            <!-- Message de bienvenue -->
            <div class="welcome-section">
              <h2 class="welcome-title">
                <span class="welcome-emoji">üëã</span>
                Bonjour Bakary, voici un aper√ßu de votre<br> tableau de bord.
              </h2>
              <p class="welcome-subtitle">Consultez les statistiques et g√©rez vos centres de formation</p>
            </div>

            <!-- Actions rapides -->
            <div class="quick-actions-section">
              <h3 class="section-title">Actions rapides</h3>
              <div class="action-buttons">
                <button class="action-btn" (click)="addAdmin()">
                  <i class="fas fa-plus"></i>
                  ADD Admin
                </button>
                <button class="action-btn" (click)="addDomain()">
                  <i class="fas fa-tag"></i>
                  Domaine
                </button>
                <button class="action-btn" (click)="viewDomains()">
                  <i class="fas fa-list"></i>
                  Voir domaines
                </button>
              </div>
            </div>
          </div>

      <!-- Colonnes principales -->
      <div class="main-columns">
        <!-- Colonne gauche -->
        <div class="left-column">
          <!-- Cartes de statistiques -->
          <div class="stats-grid">
            <div class="stat-card stat-blue">
              <div class="stat-content">
                <div class="stat-text">
                  <h4 class="stat-title">Centres de formation</h4>
                  <div class="stat-value">{{ centresCount }}</div>
                </div>
                <div class="stat-icon">
                  <i class="fas fa-building"></i>
                </div>
              </div>
            </div>

            <div class="stat-card stat-red">
              <div class="stat-content">
                <div class="stat-text">
                  <h4 class="stat-title">Comptes bloqu√©s</h4>
                  <div class="stat-value">{{ blockedCount }}</div>
                </div>
                <div class="stat-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
              </div>
            </div>

            <div class="stat-card stat-yellow">
              <div class="stat-content">
                <div class="stat-text">
                  <h4 class="stat-title">En attente</h4>
                  <div class="stat-value">{{ pendingCount }}</div>
                </div>
                <div class="stat-icon">
                  <i class="fas fa-clock"></i>
                </div>
              </div>
            </div>

            <div class="stat-card stat-green">
              <div class="stat-content">
                <div class="stat-text">
                  <h4 class="stat-title">Administrateurs actifs</h4>
                  <div class="stat-value">{{ activeAdminsCount }}</div>
                </div>
                <div class="stat-icon">
                  <i class="fas fa-users"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Colonne droite -->
        <div class="right-column">
          <!-- Activit√© r√©cente -->
          <div class="recent-activities-section">
            <div class="section-header">
              <h3 class="section-title">Activit√© r√©cente</h3>
            </div>
            <div class="activities-list" *ngIf="notifications && notifications.length; else emptyActivities">
              <div class="activity-item" *ngFor="let n of notifications">
                <div class="activity-icon">
                  <i class="fas fa-wave-square"></i>
                </div>
                <div class="activity-content">
                  <span class="activity-message">{{ n.message }}</span>
                  <span class="activity-time">{{ n.date | date:'short' }}</span>
                </div>
              </div>
            </div>
            <ng-template #emptyActivities>
              <div style="color:#888; font-size:14px;">Aucune activit√© r√©cente</div>
            </ng-template>
          </div>

        </div>
      </div>
    </div>
  </main>
</div>

<!-- Admin Modal -->
<app-admin-modal
  *ngIf="showAdminModal"
  (modalClosed)="closeAdminModal()"
  (adminCreated)="onAdminCreated($event)">
</app-admin-modal>

<!-- Confirmation Modal -->
<app-confirmation-modal
  *ngIf="showConfirmationModal"
  [adminName]="createdAdminName"
  (modalClosed)="closeConfirmationModal()">
</app-confirmation-modal>

<!-- Domain Modal -->
<app-domain-modal
  *ngIf="showDomainModal"
  (modalClosed)="closeDomainModal()"
  (domainCreated)="onDomainCreated($event)">
</app-domain-modal>

<!-- Domains List Modal -->
<app-domains-list-modal
  *ngIf="showDomainsListModal"
  [domains]="domains"
  (modalClosed)="closeDomainsListModal()"
  (domainEdit)="editDomain($event)"
  (domainDelete)="deleteDomain($event)">
</app-domains-list-modal>

<!-- Edit Domain Modal -->
<app-edit-domain-modal
  *ngIf="showEditDomainModal"
  [domain]="selectedDomain"
  (modalClosed)="closeEditDomainModal()"
  (domainUpdated)="onDomainUpdated($event)">
</app-edit-domain-modal>

<!-- Delete Domain Modal -->
<app-delete-domain-modal
  *ngIf="showDeleteDomainModal"
  [domainName]="selectedDomain?.libelle || ''"
  (modalClosed)="closeDeleteDomainModal()"
  (domainDeleted)="confirmDomainDeletion()">
</app-delete-domain-modal>

<!-- Notifications Modal -->
<app-notifications-modal
  *ngIf="showNotificationsModal"
  [notifications]="notifications"
  (modalClosed)="closeNotificationsModal()"
  (notificationRead)="onNotificationRead($event)">
</app-notifications-modal>
