<div class="modal-overlay" (click)="closeModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">Refuser le paiement</h2>
      <button class="close-btn" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body" *ngIf="paiement">
      <div class="warning-message">
        <i class="fas fa-exclamation-triangle"></i>
        <p>Le jeune sera notifié par email du refus de son paiement.</p>
      </div>

      <div class="paiement-details">
        <div class="detail-row">
          <span class="detail-label">Référence:</span>
          <span class="detail-value">{{ paiement.reference }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Jeune:</span>
          <span class="detail-value">{{ paiement.jeune.prenom }} {{ paiement.jeune.nom }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Formation:</span>
          <span class="detail-value">{{ paiement.formation.titre }}</span>
        </div>
        <div class="detail-row" *ngIf="paiement.formation.centre">
          <span class="detail-label">Centre:</span>
          <span class="detail-value">{{ paiement.formation.centre.nom }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Montant:</span>
          <span class="detail-value">{{ paiement.montant }} FCFA</span>
        </div>
      </div>

      <div class="form-group">
        <label for="motifRefus" class="form-label">
          Motif du refus <span class="required">*</span>
        </label>
        <textarea
          id="motifRefus"
          class="form-textarea"
          [(ngModel)]="motifRefus"
          (ngModelChange)="onMotifChange()"
          placeholder="Veuillez indiquer la raison du refus..."
          rows="4"
        ></textarea>
        <span class="error-text" *ngIf="errorMessage">{{ errorMessage }}</span>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeModal()">Annuler</button>
      <button class="btn-danger" (click)="confirmerRefus()">
        <i class="fas fa-times-circle"></i>
        Refuser le paiement
      </button>
    </div>
  </div>
</div>

